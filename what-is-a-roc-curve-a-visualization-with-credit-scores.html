<!DOCTYPE html>
<html lang="en">

<head>
      <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />


  <title>What is a ROC Curve? A visualization with credit scores.</title>


  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="referrer" content="origin" />
  <meta name="generator" content="Pelican" />
  <link href="https://kiwidamien.github.io" rel="canonical" />

  <!-- Feed -->

  <link href="https://kiwidamien.github.io/theme/css/style.css" type="text/css" rel="stylesheet" />

  <!-- Code highlight color scheme -->
      <link href="https://kiwidamien.github.io/theme/css/code_blocks/monokai.css" rel="stylesheet">

    <!-- CSS specified by the user -->
    <link href="https://kiwidamien.github.io/assets/css/mystyle.css" type="text/css" rel="stylesheet" />

      <!-- CSS requested from styles tag -->
 
        <link rel="stylesheet" href="https://kiwidamien.github.io/css/roc_tables.css" type="text/css" />
 
        <link rel="stylesheet" href="https://kiwidamien.github.io/css/roc_style.css" type="text/css" />
 
        <link rel="stylesheet" href="https://kiwidamien.github.io/css/roc_layout.css" type="text/css" />

  <!-- Custom fonts -->
  <link href='https://fonts.googleapis.com/css?family=Montserrat:400,300' rel='stylesheet' type='text/css' />
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css" />

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->


    <link href="https://kiwidamien.github.io/what-is-a-roc-curve-a-visualization-with-credit-scores.html" rel="canonical" />

        <meta name="description" content="ROC (Receiver Operator Characteristic) curves are a great way for measuring the performance of binary classifiers. They show how well a...">

        <meta name="author" content="Damien Martin">

        <meta name="tags" content="data">
        <meta name="tags" content="visualization">
        <meta name="tags" content="metrics">
        <meta name="tags" content="roc">

        <meta property="og:locale" content="" />
    <meta property="og:site_name" content="Stacked Turtles" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Stacked Turtles" />
    <meta property="og:description" content="View the blog." />
    <meta property="og:url" content="https://kiwidamien.github.io" />
      <meta property="og:image" content="https://kiwidamien.github.io/assets/images/tools.png" />

  <meta property="og:type" content="article">
            <meta property="article:author" content="https://kiwidamien.github.io/author/damien-martin.html">
  <meta property="og:url" content="https://kiwidamien.github.io/what-is-a-roc-curve-a-visualization-with-credit-scores.html">
  <meta property="og:title" content="What is a ROC Curve? A visualization with credit scores.">
  <meta property="article:published_time" content="2019-03-03 16:00:00-08:00">
            <meta property="og:description" content="ROC (Receiver Operator Characteristic) curves are a great way for measuring the performance of binary classifiers. They show how well a...">

            <meta propery="og:image" content="https://kiwidamien.github.io/assets/images/cover_background/tool_background.svg">
</head>
<!-- TODO : Body class -->
<body class="home-template">

<nav id="menu">
  <a class="close-button">Close</a>
  <div class="nav-wrapper">
    <p class="nav-label">Menu</p>
    <ul>
          <li><a href="https://kiwidamien.github.io/about.html" role="presentation">About this blog</a></li>
          <li><a href="http://slashdot.org" role="presentation">slashdot</a></li>
          <li><a href="https://thisismetis.com" role="presentation">metis</a></li>
          <li><a href="https://stackoverflow.com" role="presentation">stackoverflow</a></li>


    </ul>
  </div>
</nav>
    <!-- Progressbar -->
    <div class="progress-container">
        <span class="progress-bar"></span>
    </div>

    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header id="post-header" class="has-cover">
      <div class="inner">
        <nav id="navigation">
            <span id="home-button" class="nav-button">
                <a class="home-button" href="https://kiwidamien.github.io" title="Home"><i class="ic ic-arrow-left"></i> Home</a>
            </span>
          <span id="menu-button" class="nav-button">
            <a class="menu-button"><i class="ic ic-menu"></i> Menu</a>
          </span>
        </nav>
        <h1 class="post-title">What is a ROC Curve? A visualization with credit scores.</h1>
        <!-- TODO : Proper class for headline -->
        <span class="post-meta">
                <a href="https://kiwidamien.github.io/author/damien-martin.html">Damien martin</a>
            | <time datetime="Sun 03 March 2019">Sun 03 March 2019</time>
        </span>
        <span class="post-meta">
          Filed under: <b><a href="https://kiwidamien.github.io/category/tools.html">Tools</a></b>
        </span>

        <!-- TODO : Modified check -->


    <div class="post-cover cover"
      style="background-image: url('assets/images/cover_background/tool_background.svg'); background-repeat: repeat; background-size: 100px 100px; background-color: rgb(240,180,82);">
      <div class="logoimg">
        <img src='https://kiwidamien.github.io/assets/images/icon/turtle.svg'/>
      </div>
      <div class="logoimg">
        <img src='assets/images/icon/tool_icon.png'/>
      </div>

</div>
      </div>
    </header>

  <section id="wrapper">
    <a class="hidden-close"></a>

    <!-- Post content -->
    <main class="content" role="main">
        <article class="post">
        <div class="inner">
            <section class="post-content">
                <h2>Classification: Hard vs Soft Predictions</h2>
<p>We usually think of a classifier as being a model that takes in a set of features, and predicts a single class for that object. For example, a classifier might process a picture and classify it as a "cat" or a "dog". These predictions are called <em>hard predictions</em>, insofar as we only get the predicted class with no indication of the "confidence" that the model has in its prediction. A <em>soft prediction</em> is when we assign each category a score, with a higher score meaning we have more confidence in that answer. One natural score to use is the "probability" that an image belongs to a certain category. For an example of the difference, an image classifier might classify the image on the left as a cat (hard prediction) but only give it a low score (soft prediction) as it isn't entirely sure it isn't a croissant.</p>
<p><img src="images/roc/catcroissant.png" width="70%" /></p>
<p>If we have a soft prediction, one way of generating a hard prediction is to guess the class with the highest score. If your model is well-trained, and your goal is to maximize accuracy, this is the best approach to take. If, however, the costs of misclassication are drastically different for the different classes, predicting accuracy might not be the right thing to measure. An example of this in a multiclass setting might be a test to determine if food is still good: after putting a sample of milk in I might receive the following predictions:</p>
<table>
<thead>
<tr>
<th>Class</th>
<th>Fine</th>
<th>Taste Funny</th>
<th>Nautious</th>
<th>Food poising</th>
<th>Kills me</th>
</tr>
</thead>
<tbody>
<tr>
<td>Score / probability</td>
<td>70%</td>
<td>15%</td>
<td>7%</td>
<td>5%</td>
<td>3%</td>
</tr>
</tbody>
</table>
<p>I'd want the "food classifier" to predict <strong>Kills me</strong>, not because it is the most likely outcome, but because the chance is high enough that I would want to know (especially since the consequence of it being wrong is that I have to spend a little more on milk than I otherwise would have).</p>
<p>The process of taking a soft prediction and turning it into a hard prediction is known as "thresholding". For non-trivial problems, where the right answer isn't just "take the category with the biggest score", thresholding the soft predictions into hard ones is an important part of the problem. This <strong>doesn't</strong> mean that you can just use the hard <code>predict</code> method of your model - all that does is force your software to make the thresholding decision for you! </p>
<h3>The special case of binary classifiers</h3>
<p>Binary classifiers are usually phrased in terms of trying to detect a positive class. For such classifiers, we only need one score, with a higher score meaning we are more confident that our example belongs to the positive class. For example:</p>
<ul>
<li>A "cat classifier" gives a score to images, with higher scores corresponding to more confidence the image is a cat,</li>
<li>An airport "metal detector" uses magnets to assign a score (induced current) to objects that pass through it, with higher score meaning more confidence or amount of metal detected,</li>
<li>A "movie recommender" uses features of a film and assigns a score to determine if you would like it,</li>
<li>A "cancer detector" reads in measurements from a patient and returns a score, with a higher score meaning more likely to have cancer.</li>
</ul>
<p>For the cat classifier, we could imagine that the output is a "probability" the model assigns to the image being a cat. For an airport metal detector, the "score" is usually the amount of current induced in the detector, but the "hard prediction" of making the alarm go off only occurs once that current crosses a threshold. This is a nice example because a metal detector doesn't give the probability that metal is present or not (that is actually very high - even if you remove all jewelry you probably still have metal shoelace eyelets on your shoes), but instead tries to detect if you have <em>too much</em> metal on you. How much is too much? Well, that depends entirely on how the machine's threshold is set up. When setting it, security staff are balancing letting people through with weapons that we hope to detect against having to spend time searching every person with even a tiny amount of metal on them. There isn't really a nice translation from the current score to a "probability" person has metal on them (which as mentioned above, is cloes to 1).</p>
<p>A movie recommender might predict what it thinks your star rating of a movie might be (a score). I can decide that I am only interested in movies that are predicted to be a 7/10 or above for me. It isn't that a 7/10 movie means there is a 70% chance I like it, while an 8/10 has an 80% chance I like it. If the predictions were perfect, it means that I would like both movies, but I would like the 8/10 movie more. If the predicitons are not perfect (i.e. any real classifier) I might or might not like either movie, but chances are that I am more likely to like the (predicted) 8/10 movie than the (predicted) 7/10 movie.</p>
<p>So we have seen some examples of scores that are not probabilities. Our basic criteria for scores are the following:</p>
<ul>
<li>The higher the model scores an example, the more confident it is that the example is in the "positive class",</li>
<li>A good model will tend to give higher scores to objects in the positive class,</li>
<li>A perfect model will give all examples in the positive class higher scores than any example not in the positive class.</li>
</ul>
<p>This last bullet point means that for a perfect model, there is a threshold score so that all positive class examples greater than </p>
<h2>The ROC and Area Under The Curve</h2>
<h2>Credit score example</h2>
<p>You can try adjusting the threshold to see how it relates to the ROC curve below (or use the <a href="/d3_roc_vanilla">full page version</a>).</p>
<div class='container'>
  <div id='people'>
  </div>

  <div class='label_area'>
    <div>
      <div class='title'>Threshold: <span class='threshold_label'></span></div>
      <div class='subtitle'>i.e. accept everyone with credit scores above <span class='threshold_label'></span></div>
      <div class='subtitle'>People shown in <b><span style="color: red;">red</span></b> actually defaulted</div>
      <div class='subtitle'>People shown in <b><span style="color: black;">black</span></b> actually repaid</div>
    </div>
  </div>

  <div id='plot_area'>
  </div>

  <div class='table_area'>
    <div>
      <table>
        <tbody>
          <tr>
            <th></th>
            <th>Accepted</th>
            <th>Total</th>
            <th>Positive rate</th>
            <th></th>
          </tr>
          <tr>
            <td class='actual_payment_class'>Pay back</td>
            <td><span id='table_payback_accepted'></span></td>
            <td><span id='table_payback_total'></span></td>
            <td><span id='table_payback_ratio'></span></td>
            <td>(TPR)</td>
          </tr>
          <tr>
            <td class='actual_payment_class'>Default</td>
            <td><span id='table_default_accepted'></span></td>
            <td><span id='table_default_total'></span></td>
            <td><span id='table_default_ratio'></span></td>
            <td>(FPR)</td>
          </tr>
          <tr>
            <td class='actual_payment_class'>Total</td>
            <td><span id='table_total_accepted'></span></td>
            <td><span id='table_total'></span></td>
          </tr>
        </tbody>
      </table>
    </div>

    <div>
     <table>
       <tbody>
         <tr>
           <th>Measurement</th>
           <th>Fraction</th>
           <th>Value</th>
         </tr>
         <tr>
           <td class='actual_payment_class'>True positive rate</td>
           <td><span id='table_tpr_ratio'></span></td>
           <td><span id='table_tpr_float'></span></td>
         </tr>
         <tr>
           <td class='actual_payment_class'>False positive rate</td>
           <td><span id='table_fpr_ratio'></span></td>
           <td><span id='table_fpr_float'></span></td>
         </tr>
         <tr>
           <td class='actual_payment_class'>Precision</td>
           <td><span id='table_precision_ratio'></span></td>
           <td><span id='table_precision_float'></span></td>
         </tr>
         <tr>
           <td class='actual_payment_class'>Recall</td>
           <td><span id='table_recall_ratio'></span></td>
           <td><span id='table_recall_float'></span></td>
         </tr>
       </tbody>
     </table>
     </div>

     <div class='model_choice'>
       <h5>Model choice</h5>
       <div>
         <input type="radio" name="model" onChange="changeModelNumber(0)">&nbsp;&nbsp;Perfect Model
       </div>
       <div>
         <input type="radio" name="model" onChange="changeModelNumber(1)" checked="true">&nbsp;&nbsp;Model 1
       </div>
       <div>
         <input type="radio" name="model" onChange="changeModelNumber(2)">&nbsp;&nbsp;Model 2
       </div>
    </div>
  </div>
</div>

<h2>Summary</h2>
<h2>Acknowledgements</h2>
<p>I'd like to thank <a href="https://github.com/brendenrossin">Brendan Rossin</a> for pointing out an error I made while going through this example in a review session, which gave me the motivation to write this up properly.</p>
<h2>Related articles</h2>
<ul>
<li>Article on how probabilities from <code>predict_proba</code> are not probabilities (to come)</li>
<li>Article on the proliferation of bad names in classification (to come)</li>
</ul>
            </section>

            <section class="post-info">
                <div class=a"post-share">
                    <a class="twitter" href="https://twitter.com/share?text=What is a ROC Curve? A visualization with credit scores.&amp;url=https://kiwidamien.github.io/what-is-a-roc-curve-a-visualization-with-credit-scores.html" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <i class="ic ic-twitter"></i><span class="hidden">Twitter</span>
                    </a>
                    <a class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://kiwidamien.github.io/what-is-a-roc-curve-a-visualization-with-credit-scores.html" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <i class="ic ic-facebook"></i><span class="hidden">Facebook</span>
                    </a>
                    <a class="googleplus" href="https://plus.google.com/share?url=https://kiwidamien.github.io/what-is-a-roc-curve-a-visualization-with-credit-scores.html" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <i class="ic ic-googleplus"></i><span class="hidden">Google+</span>
                    </a>
                    <div class="clear"></div>
                </div>

                <aside class="post-tags">
<a href="https://kiwidamien.github.io/tag/data.html">data</a><a href="https://kiwidamien.github.io/tag/visualization.html">visualization</a><a href="https://kiwidamien.github.io/tag/metrics.html">metrics</a><a href="https://kiwidamien.github.io/tag/roc.html">roc</a>                </aside>

                <div class="clear"></div>

                <aside class="post-author">
                        <figure class="post-author-avatar">
                            <img src="../assets/images/avatar.png" alt="Damien martin" />
                        </figure>
                    <div class="post-author-bio">
                        <h4 class="post-author-name"><a href="https://kiwidamien.github.io/author/damien-martin.html">Damien martin</a></h4>
                            <p class="post-author-about">I am a data scientist with an interest in what drives the world. Background in Physics, Math, and Computer Science. Interested in Algorithms, Games, Books, Music, and Martial Arts. That is, when I am not off taking pictures somewhere! </p>
                            <span class="post-author-location"><i class="ic ic-location"></i> USA</span>
                            <span class="post-author-website"><a href="http://kiwidamien.github.io"><i class="ic ic-link"></i> Website</a></span>
                    </div>
                    <div class="clear"></div>
                </aside>

                </section>


                <aside class="post-nav">
                    <a class="post-nav-prev" href="https://kiwidamien.github.io/prevent-big-commits.html">
                        <section class="post-nav-teaser">
                            <i class="ic ic-arrow-right"></i>
                                <h2 class="post-nav-title">Prevent big commits</h2>
                            <p class="post-nav-excerpt">Instead of learning how to undo accidentally commiting a large file, what if we could...</p>
                        </section>
                    </a>
                    <div class="clear"></div>
                </aside>

            </div>
        </article>
    </main>
      <!-- TODO : Body class -->
    <div id="body-class" style="display: none;" class=""></div>
  
  </section>

  <script type="text/javascript" src="https://kiwidamien.github.io/theme/js/script.js"></script>

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-131671634-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
</body>

      <!-- Adding JS from scripts tag -->
        <script src="https://d3js.org/d3.v3.min.js"></script>
        <script src="https://kiwidamien.github.io/js/roc_rates.js"></script>
        <script src="https://kiwidamien.github.io/js/roc_tableUpdate.js"></script>
        <script src="https://kiwidamien.github.io/js/roc_plot.js"></script>
</html>