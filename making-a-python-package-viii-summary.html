<!DOCTYPE html>
<html lang="en">

<head>
      <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />


  <title>Making a Python Package VIII - summary</title>


  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="referrer" content="origin" />
  <meta name="generator" content="Pelican" />
  <link href="https://kiwidamien.github.io" rel="canonical" />

  <!-- Feed -->

  <link href="https://kiwidamien.github.io/theme/css/style.css" type="text/css" rel="stylesheet" />

  <!-- Code highlight color scheme -->
      <link href="https://kiwidamien.github.io/theme/css/code_blocks/monokai.css" rel="stylesheet">

    <!-- CSS specified by the user -->
    <link href="https://kiwidamien.github.io/assets/css/mystyle.css" type="text/css" rel="stylesheet" />

  <!-- Custom fonts -->
  <link href='https://fonts.googleapis.com/css?family=Montserrat:400,300' rel='stylesheet' type='text/css' />
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css" />

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->


    <link href="https://kiwidamien.github.io/making-a-python-package-viii-summary.html" rel="canonical" />

        <meta name="description" content="This is the eighth in a series of blog posts where we go through the process of taking a collection of functions and turn them into a...">

        <meta name="author" content="Damien Martin">

        <meta name="tags" content="python">
        <meta name="tags" content="engineering">
        <meta name="tags" content="package">
        <meta name="tags" content="best-practices">

        <meta property="og:locale" content="" />
    <meta property="og:site_name" content="Stacked Turtles" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Stacked Turtles" />
    <meta property="og:description" content="View the blog." />
    <meta property="og:url" content="https://kiwidamien.github.io" />
      <meta property="og:image" content="https://kiwidamien.github.io/assets/images/tools.png" />

  <meta property="og:type" content="article">
            <meta property="article:author" content="https://kiwidamien.github.io/author/damien-martin.html">
  <meta property="og:url" content="https://kiwidamien.github.io/making-a-python-package-viii-summary.html">
  <meta property="og:title" content="Making a Python Package VIII - summary">
  <meta property="article:published_time" content="2019-01-05 12:30:00-08:00">
            <meta property="og:description" content="This is the eighth in a series of blog posts where we go through the process of taking a collection of functions and turn them into a...">

            <meta propery="og:image" content="https://kiwidamien.github.io/assets/images/cover_background/tool_background.svg">
</head>
<!-- TODO : Body class -->
<body class="home-template">

<nav id="menu">
  <a class="close-button">Close</a>
  <div class="nav-wrapper">
    <p class="nav-label">Menu</p>
    <ul>
          <li><a href="https://kiwidamien.github.io/about.html" role="presentation">About this blog</a></li>
          <li><a href="http://slashdot.org" role="presentation">slashdot</a></li>
          <li><a href="https://thisismetis.com" role="presentation">metis</a></li>
          <li><a href="https://stackoverflow.com" role="presentation">stackoverflow</a></li>


    </ul>
  </div>
</nav>
    <!-- Progressbar -->
    <div class="progress-container">
        <span class="progress-bar"></span>
    </div>

    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header id="post-header" class="has-cover">
      <div class="inner">
        <nav id="navigation">
            <span id="home-button" class="nav-button">
                <a class="home-button" href="https://kiwidamien.github.io" title="Home"><i class="ic ic-arrow-left"></i> Home</a>
            </span>
          <span id="menu-button" class="nav-button">
            <a class="menu-button"><i class="ic ic-menu"></i> Menu</a>
          </span>
        </nav>
        <h1 class="post-title">Making a Python Package VIII - summary</h1>
        <!-- TODO : Proper class for headline -->
        <span class="post-meta">
                <a href="https://kiwidamien.github.io/author/damien-martin.html">Damien martin</a>
            | <time datetime="Sat 05 January 2019">Sat 05 January 2019</time>
        </span>
        <span class="post-meta">
          Filed under: <b><a href="https://kiwidamien.github.io/category/tools.html">Tools</a></b>
        </span>

        <!-- TODO : Modified check -->


    <div class="post-cover cover"
      style="background-image: url('assets/images/cover_background/tool_background.svg'); background-repeat: repeat; background-size: 100px 100px; background-color: rgb(240,180,82);">
      <div class="logoimg">
        <img src='https://kiwidamien.github.io/assets/images/icon/turtle.svg'/>
      </div>
      <div class="logoimg">
        <img src='assets/images/icon/tool_icon.png'/>
      </div>

</div>
      </div>
    </header>

  <section id="wrapper">
    <a class="hidden-close"></a>

    <!-- Post content -->
    <main class="content" role="main">
        <article class="post">
        <div class="inner">
            <section class="post-content">
		    <p>This post is part 8 of the "Making a Python Package" series:</p>
    		    <ol class="parts">
            	        <li >
                          <a href='https://kiwidamien.github.io/making-a-python-package.html'>Making a Python Package</a>
                        </li>
            	        <li >
                          <a href='https://kiwidamien.github.io/making-a-python-package-ii-writing-docstrings.html'>Making a Python Package II - writing docstrings</a>
                        </li>
            	        <li >
                          <a href='https://kiwidamien.github.io/making-a-python-package-iii-making-an-installable-package.html'>Making a Python Package III - making an installable package</a>
                        </li>
            	        <li >
                          <a href='https://kiwidamien.github.io/making-a-python-package-iv-writing-unit-tests.html'>Making a Python Package IV - writing unit tests</a>
                        </li>
            	        <li >
                          <a href='https://kiwidamien.github.io/making-a-python-package-v-testing-with-tox.html'>Making a Python Package V - Testing with Tox</a>
                        </li>
            	        <li >
                          <a href='https://kiwidamien.github.io/making-a-python-package-vi-including-data-files.html'>Making a Python Package VI - including data files</a>
                        </li>
            	        <li >
                          <a href='https://kiwidamien.github.io/making-a-python-package-vii-deploying.html'>Making a Python Package VII - deploying</a>
                        </li>
            	        <li class="active">
                          <a href='https://kiwidamien.github.io/making-a-python-package-viii-summary.html'>Making a Python Package VIII - summary</a>
                        </li>
                    </ol>
                <p>Note: To get the material for this blog post, visit the <a href="https://github.com/kiwidamien/Roman">master branch of Romans!</a> Github project. To get it locally, and assuming you cloned the previous version, run</p>
<div class="highlight"><pre><span></span><span class="c1"># clear last set of changes</span>
$ git reset --hard HEAD
<span class="c1"># checkout this version</span>
$ git checkout master
</pre></div>


<h1>Making a Python Package VIII: Summary</h1>
<p>We are going to assume that you want to install <code>roman</code>, but you could change the package to whatever you would like</p>
<h2>Packages to install</h2>
<div class="highlight"><pre><span></span>$ pip install pycodestyle pydocstyle setuptools pytest tox twine
</pre></div>


<h2>Directory layout</h2>
<p>You should have the following directory layout:</p>
<div class="highlight"><pre><span></span>.
+-- roman/
    +-- __init__.py
    +-- <span class="o">(</span>any *.py files needed<span class="o">)</span>
    +-- data/
        +-- <span class="o">(</span>any data files you want included<span class="o">)</span>
+-- tests/
    +-- __init__.py <span class="o">(</span>can be blank<span class="o">)</span>
    +-- <span class="o">(</span>any test_*.py files needed<span class="o">)</span>
+-- README.md
+-- DESCRIPTION.rst
+-- MANIFEST.in
+-- setup.py
+-- tox.ini
</pre></div>


<p><strong>Notes:</strong></p>
<ol>
<li>The <code>test/__init__.py</code> can be blank (and probably should be).</li>
<li>The <code>roman/__init__.py</code> should probably import other modules in the directory. There is a lot of information about how <code>__init__.py</code> works in the <a href="making-a-python-package.html">first article</a> of this series.</li>
<li>The <code>roman/data/</code> directory is optional -- not all projects will need external data.</li>
<li>If your project <em>does</em> use external data sets, you should use <code>pkg_resources</code> to access them. A short introduction on how to do this is given in the <a href="/making-a-python-package-vi-including-data-files.html">sixth article</a> of this series.</li>
</ol>
<h2>Writing unit tests</h2>
<ol>
<li>Place tests in the <code>test/</code> subdirectory.</li>
<li>Make sure all files containing tests follow the pattern <code>test_*.py</code></li>
<li>Make sure all functions that incorporate tests start with <code>def test_.....</code></li>
<li>Write tests based on what you think the functions <em>should</em> do, don't write tests tham mimic the existing implementation.</li>
</ol>
<p>More detail on <a href="/making-a-python-package-iv-writing-unit-tests.html">unit tests here</a>. </p>
<h2>Lint everything with tox</h2>
<p>The file <code>tox.ini</code> should have the following format</p>
<div class="highlight"><pre><span></span><span class="o">[</span>tox<span class="o">]</span>
<span class="nv">envlist</span><span class="o">=</span>py36

<span class="o">[</span>testenv<span class="o">]</span>
<span class="nv">deps</span> <span class="o">=</span>
  pandas
  pydocstyle
  pycodestyle
  pytest
<span class="nv">commands</span> <span class="o">=</span>
  - pydocstyle --ignore<span class="o">=</span>D100,D104,D213 roman/
  - pycodestyle roman/
  pytest
</pre></div>


<p>Include other depedencies as needed. You should periodically run <code>tox</code> while developing, and fix linting errors and address unit test failures as they occur. Note that we deliberately don't lint the unit test files.</p>
<p>More detail on <a href="/making-a-python-package-v-testing-with-tox.html">tox</a> and <a href="/making-a-python-package-ii-writing-docstrings.html">docstrings</a>.</p>
<h2>Create setup.py</h2>
<p>The <code>setup.py</code> file tells Python how to install via the <code>pip setup.py install</code> command. Even if you intend to distribute your file via the Python Package Index, PyPI, you still need <code>setup.py</code> to generate the build directory. There are lots of options for <code>setup.py</code>, but this is reasonably well-featured example that you can modify for your package:</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">setuptools</span>

<span class="n">setuptools</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;roman&quot;</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="s2">&quot;0.1.0&quot;</span><span class="p">,</span>
    <span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://github.com/kiwidamien/roman&quot;</span><span class="p">,</span>
    <span class="n">author</span><span class="o">=</span><span class="s2">&quot;Damien Martin&quot;</span><span class="p">,</span>
    <span class="n">author_email</span><span class="o">=</span><span class="s2">&quot;damien.j.martin@gmail.com&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Allows conversion of Roman numerals to ints (and vice versa)&quot;</span><span class="p">,</span>
    <span class="n">long_description</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;DESCRIPTION.rst&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span>
    <span class="n">packages</span><span class="o">=</span><span class="n">setuptools</span><span class="o">.</span><span class="n">find_packages</span><span class="p">(),</span>
    <span class="n">install_requires</span><span class="o">=</span><span class="p">[],</span>
    <span class="n">classifiers</span><span class="o">=</span><span class="p">[</span>
        <span class="s1">&#39;Programming Language :: Python&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Programming Language :: Python :: 3&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Programming Language :: Python :: 3.6&#39;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">include_package_data</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">package_data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;data/*.csv&#39;</span><span class="p">]},</span>
<span class="p">)</span>
</pre></div>


<p><strong>Note:</strong></p>
<ol>
<li>The last two fields, <code>include_package_data</code> and <code>package_data</code>, are only useful if you are including extra data to go with your package. Most packages won't need this.</li>
</ol>
<h2>Including other files (e.g. DESCRIPTION.rst, images, LICENCE files)</h2>
<p>Use <code>MANIFEST.in</code> to ensure that files outside of <code>roman/</code> that you want distributed with your code are installed by <code>twine</code>. The format for <code>MANIFEST.in</code> is simple; in this project we used</p>
<div class="highlight"><pre><span></span>include DESCRIPTION.ini
</pre></div>


<h2>Deploying</h2>
<p>Thre are two methods of deploying: using a Github repo, or using a Python Package Index (TestPyPI / PyPI).</p>
<h3>Deploy via Github</h3>
<p>If you have a github repo <code>roman</code>, users can use pip to install you package directory with the command </p>
<div class="highlight"><pre><span></span>$ pip install git+https://github.com/&lt;github username&gt;/roman
</pre></div>


<h3>Deploy via pip to TestPyPI</h3>
<p>You will need to set up an account on TestPyPI before completing this step. Your project name also has to be unique across all of TestPyPI (unlike Github, where your repo names just have to be unique to your account). You can set up an account on TestPyPI via <a href="https://test.pypi.org/account/register/">this link</a>.</p>
<p>Before deploying, ensure that you have run <code>tox</code> and dealt with any linter errors or failing unit tests.</p>
<p>To do the deploy, run the following commands in the shell</p>
<div class="highlight"><pre><span></span><span class="c1"># create the distribution</span>
$ python setup.py install

<span class="c1"># now install the newly created dist directory using twine</span>
$ twine upload --repository-url https://test.pypi.org/legacy/ dist/*
</pre></div>


<p>You are done! To install this package, run the command </p>
<div class="highlight"><pre><span></span>pip install --extra-index-url https://testpypi.python.org/simple roman
</pre></div>


<p><strong>Note:</strong></p>
<ol>
<li>This will fail if you try it, because I have already used the name <code>roman</code>. Find a name that is unique on TestPyPI for your package.</li>
</ol>
<h3>Deploy via pip to PyPI</h3>
<p>This is very similar to deploying on TestPyPI. You will need to create an account on PyPI to deploy your package (you cannot just use the TestPyPI account). You should also make sure that you have run <code>tox</code> and ensured you have no linter errors or failing unit tests.</p>
<p>The commands to deploy are</p>
<div class="highlight"><pre><span></span><span class="c1"># create the distribution</span>
$ python setup.py install

<span class="c1"># now install on the real PyPI</span>
$ twine upload roman
</pre></div>


<p>To install, simply run</p>
<div class="highlight"><pre><span></span>$ pip install roman
</pre></div>


<p>Congratulations! You have now installed a package on the Python Package Index, and made it available to the world.</p>
<p><strong>Note</strong></p>
<ol>
<li>This will work for at most one user. The name of your package has to be unique on PyPI.</li>
</ol>
            </section>

            <section class="post-info">
                <div class=a"post-share">
                    <a class="twitter" href="https://twitter.com/share?text=Making a Python Package VIII - summary&amp;url=https://kiwidamien.github.io/making-a-python-package-viii-summary.html" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <i class="ic ic-twitter"></i><span class="hidden">Twitter</span>
                    </a>
                    <a class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://kiwidamien.github.io/making-a-python-package-viii-summary.html" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <i class="ic ic-facebook"></i><span class="hidden">Facebook</span>
                    </a>
                    <a class="googleplus" href="https://plus.google.com/share?url=https://kiwidamien.github.io/making-a-python-package-viii-summary.html" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <i class="ic ic-googleplus"></i><span class="hidden">Google+</span>
                    </a>
                    <div class="clear"></div>
                </div>

                <aside class="post-tags">
<a href="https://kiwidamien.github.io/tag/python.html">python</a><a href="https://kiwidamien.github.io/tag/engineering.html">engineering</a><a href="https://kiwidamien.github.io/tag/package.html">package</a><a href="https://kiwidamien.github.io/tag/best-practices.html">best-practices</a>                </aside>

                <div class="clear"></div>

                <aside class="post-author">
                        <figure class="post-author-avatar">
                            <img src="../assets/images/avatar.png" alt="Damien martin" />
                        </figure>
                    <div class="post-author-bio">
                        <h4 class="post-author-name"><a href="https://kiwidamien.github.io/author/damien-martin.html">Damien martin</a></h4>
                            <p class="post-author-about">I am a data scientist with an interest in what drives the world. Background in Physics, Math, and Computer Science. Interested in Algorithms, Games, Books, Music, and Martial Arts. That is, when I am not off taking pictures somewhere! </p>
                            <span class="post-author-location"><i class="ic ic-location"></i> USA</span>
                            <span class="post-author-website"><a href="http://kiwidamien.github.io"><i class="ic ic-link"></i> Website</a></span>
                    </div>
                    <div class="clear"></div>
                </aside>

                </section>


                <aside class="post-nav">
                    <a class="post-nav-prev" href="https://kiwidamien.github.io/making-a-python-package-vii-deploying.html">
                        <section class="post-nav-teaser">
                            <i class="ic ic-arrow-right"></i>
                                <h2 class="post-nav-title">Making a Python Package VII - deploying</h2>
                            <p class="post-nav-excerpt">This is the seventh in a series of blog posts where we go through the process of...</p>
                        </section>
                    </a>
                    <div class="clear"></div>
                </aside>

            </div>
        </article>
    </main>
      <!-- TODO : Body class -->
    <div id="body-class" style="display: none;" class=""></div>
  
  </section>

  <script type="text/javascript" src="https://kiwidamien.github.io/theme/js/script.js"></script>

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-131671634-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
</body>
</html>